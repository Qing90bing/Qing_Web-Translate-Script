# `build-tasks` 目录

## 目录概述

`build-tasks` 目录是整个项目自动化构建、校验和管理系统的核心。它包含了一系列 Node.js 脚本，这些脚本为开发者提供了一个强大的命令行工具集，用于维护翻译文件、执行代码质量检查以及构建最终的油猴脚本。

该目录下的所有功能都可以通过项目根目录的 `build.js` 脚本来访问和执行。

---

## 目录结构

`build-tasks` 目录采用分层设计，将核心逻辑与具体任务分离开来，以提高代码的可维护性和重用性。

-   **`/lib`**
    -   **职责**: 存放核心库模块。
    -   **内容**: 此目录包含所有可重用的底层功能模块，例如：
        -   `validation.js`: 强大的校验引擎，使用 AST (抽象语法树) 来发现代码中的问题。
        -   `prompting.js`: 基于 `inquirer` 的交互式提示模块，负责与用户进行命令行交互。
        -   `fixing.js`: 包含所有用于实际修改文件内容的函数，是“自动修复”和“手动修复”功能的执行者。
        -   `colors.js`, `utils.js`, `terminal-i18n.js`: 提供颜色、通用工具和国际化支持等基础服务。
    -   **详见**: `lib/readme.md`

-   **`/tasks`**
    -   **职责**: 存放所有具体的可执行任务脚本。
    -   **内容**: 此目录下的脚本是面向开发者的具体功能。它们通常会调用 `/lib` 中的库函数来完成工作。任务被进一步分为：
        -   `check/`: 包含所有代码质量检查和修复任务（如检查重复、空值、遗漏逗号等）。
        -   `translation/`: 包含所有与管理翻译文件相关的任务（如添加、移除、排序翻译）。
        -   `build-project.js`, `build-cdn.js`: 负责执行两种不同模式的项目构建。
    -   **详见**: `tasks/readme.md`

---

## 工作流程

1.  开发者在项目根目录运行 `node build.js`。
2.  `build.js` 显示一个主菜单，列出 `build-tasks/tasks` 中定义的各种高级任务。
3.  当用户选择一个任务时，`build.js` 会动态加载并执行该任务对应的脚本。
4.  任务脚本会调用 `/lib` 中的一个或多个模块来完成其具体的校验、交互和文件修改逻辑。

这种清晰的结构使得添加新任务或修改现有逻辑变得更加简单和安全。