# `src/modules/ui` 目录

## 目录概述

`src/modules/ui` 目录包含了所有与用户界面（UI）体验直接相关的模块。这些模块旨在优化脚本在网页上运行时的视觉表现和交互，确保用户获得流畅、无干扰的体验。

---

## 文件结构和功能

本目录包含以下关键模块：

-   **`anti-flicker.js`**
    -   **功能**: 提供“防闪烁”功能。
    -   **职责**:
        -   在脚本开始翻译时，通过注入 CSS 样式立即隐藏页面主体，以防止用户看到原始内容和翻译后内容之间的“闪烁”。
        -   在首次全文翻译完成后，移除隐藏样式，并通过平滑的淡入效果将翻译好的页面展示给用户。
        -   此模块对于提升用户体验至关重要，它确保了用户看到的始终是最终的、翻译完成的页面。

-   **`menu.js`**
    -   **功能**: 管理油猴脚本的菜单命令。
    -   **职责**:
        -   利用 Greasemonkey/Tampermonkey 提供的 `GM_*` API 动态创建和管理浏览器扩展菜单中的命令。
        -   主要提供开发者调试功能，包括一个用于**切换调试日志**的开关。
        -   在调试模式下，会额外提供一个**语言强制覆盖**的子菜单，允许开发者在不更改浏览器或系统设置的情况下，测试特定语言的翻译效果。

---

## 使用方式

这些 UI 模块通常在脚本的初始化阶段被调用：

-   `injectAntiFlickerStyle()` 在脚本执行的最开始被调用，以立即隐藏页面。
-   `initializeMenu()` 在脚本启动时被调用，以注册所有菜单命令。
-   `removeAntiFlickerStyle()` 在首次全文翻译完成后被调用，以优雅地显示页面内容。

这些模块共同协作，为最终用户和开发者提供了更好的视觉和交互体验。