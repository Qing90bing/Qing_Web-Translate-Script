# `src/modules` 目录

## 目录概述

`src/modules` 目录是脚本核心运行时逻辑的所在地。它采用了模块化的架构，将不同的功能和关注点分离到各自的子目录中，以提高代码的清晰度、可维护性和可扩展性。

---

## 子目录结构和功能

本目录包含以下核心子目录：

-   **`/core`**
    -   **职责**: 包含实现翻译功能最核心的逻辑。
    -   **内容**:
        -   `translator.js`: 核心翻译引擎，负责文本替换和 DOM 操作。
        -   `observers.js`: 动态内容监听器，使用 `MutationObserver` 来实现对动态页面的实时翻译。
        -   `translationInitializer.js`: 翻译流程的“总指挥”，负责协调和启动整个翻译过程。
    -   **详见**: `core/readme.md`

-   **`/ui`**
    -   **职责**: 包含所有与用户界面（UI）体验直接相关的模块。
    -   **内容**:
        -   `anti-flicker.js`: 提供“防闪烁”功能，在翻译完成前隐藏页面，以优化视觉体验。
        -   `menu.js`: 管理油猴脚本的菜单命令，主要用于提供开发者调试功能。
    -   **详见**: `ui/readme.md`

-   **`/utils`**
    -   **职责**: 提供通用的、与具体业务逻辑无关的辅助工具模块。
    -   **内容**:
        -   `logger.js`: 一个集中式的、可切换的日志记录器，是项目调试和性能分析的基础。
    -   **详见**: `utils/readme.md`

---

## 工作流程

脚本的运行时逻辑始于 `main.js`，它会根据当前网站加载相应的翻译配置，然后调用 `/core/translationInitializer.js` 来启动翻译流程。在整个过程中，`/ui` 模块负责改善视觉体验和提供调试工具，而 `/utils` 模块则提供底层的支持功能（如日志记录）。这种清晰的分层和职责分离使得整个系统易于理解和扩展。